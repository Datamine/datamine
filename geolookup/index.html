<html>

<head>
    <title>RUCA and CBSA lookup tool</title>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300' rel='stylesheet' type='text/css'>
    <link href="../globalstyle.css" rel="stylesheet" type="text/css">
	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="./getcbsa.js"></script>
</head>

<body>
    <br>
	<p>
	Input an address. The script then searches for the corresponding RUCA Code and the 
    legal/statistical CBSA designation of the area (micropolitan/metropolitan/neither).     
        <form onsubmit="getCBSACode();return false;">
        Address: <input type="text" size="50" id="address">
        <input type="submit"> 
    </form>

	</p>
    <p>CBSA Designation: <span id="cbsadesignation"></span></p>
    <p>RUCA Code: <span id="rucacode"></span></p>

	<br>
	<br>
    <sh>Notes</sh>
    <p>
    Under the hood, this script queries Google Maps with the address, and uses the first result. Thus, you should give a sufficiently specific address to identify your desired location, e.g. <code>street number, street name, city, state, zip code</code>. It's possible to input just the name of the location, e.g. "Empire State Building" and you'll get the right result, because there's just the one. However, if you input e.g. "Northern Hospital," you probably won't get the right result, because there are many of those.
    </p>
    <p>
    If you're using the script for the first time in a while, it may take up to two minutes to return results. The server hibernates after thirty minutes of non-use, and has to reactivate when it gets a request.
    </p>
    <p>
	If the script above doesn't work for whatever reason, <a href="http://greatdata.com/cbsa-data">here</a> is a resource that maps ZIP codes to CBSA codes, and <a href="http://tbed.org/demo/?function=show_search_form&tablename=CBSA">here</a> is a resource that maps CBSA codes to their legal/statistical designations. 
    <a href="https://geomap.ffiec.gov/FFIECGeocMap/GeocodeMap1.aspx">Here</a> is a similar mapping tool that maps addresses to FIPS-11 codes (concatenate the state code, county code, and tract code). Then see <a href="http://www.ers.usda.gov/data-products/rural-urban-commuting-area-codes.aspx">this</a> 2010 spreadsheet that maps FIPS-11 codes to RUCA codes.
    </p>
    <p>
    Questions, comments, errors, suggestions? Write to me at contact@johnloeber.com.
    </p>
</body>

</html>
